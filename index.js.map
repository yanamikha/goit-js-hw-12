{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nlet API_KEY = '49718296-934511357bd75d639d0773032';\nlet BASE_URL = 'https://pixabay.com/api/';\n\nexport async function getImagesByQuery(query, page) {\n  return await axios\n    .get(BASE_URL, {\n      params: {\n        key: API_KEY,\n        q: query,\n        page: page,\n        per_page: 15,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true\n      }\n    })\n    .then(response => response.data)\n    .catch(error => {\n      let options = {\n        theme: 'dark',\n        position: 'topRight',\n        maxWidth: 432,\n        backgroundColor: '#EF4040',\n        icon: 'fa-solid fa-triangle-exclamation',\n        message: error\n      };\n      iziToast.show(options);\n    });\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport '@fortawesome/fontawesome-free/css/all.css';\nimport '@fontsource/montserrat/600.css';\n\nlet galleryEl = document.querySelector('ul.gallery');\nlet loadMoreBtn = document.querySelector('#load-more-btn');\nlet loaderEl = document.querySelector('#loader');\nlet loaderTextEl = document.querySelector('#loaderText');\n\nlet lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionPosition: 'bottom',\n  captionDelay: 250\n});\n\nexport function createGallery(images) {\n  if (images.length === 0) {\n    let options = {\n      theme: 'dark',\n      position: 'topRight',\n      maxWidth: 432,\n      backgroundColor: '#EF4040',\n      icon: 'fa-solid fa-triangle-exclamation',\n      message:\n        'Sorry, there are no images matching your search query. Please try again!'\n    };\n    iziToast.show(options);\n    return;\n  }\n\n  let gallery = images.map(function (props) {\n    let {\n      webformatURL,\n      largeImageURL,\n      tags,\n      likes,\n      views,\n      comments,\n      downloads\n    } = props;\n    return `<li class=\"gallery-item\">\n      <a href=\"${largeImageURL}\" class=\"gallery-link\">\n        <img\n            class=\"gallery-image\"\n            src=\"${webformatURL}\" \n            alt=\"${tags}\"\n        />\n        <div class=\"image-description\">\n          <div><h2>Likes</h2><p>${likes}</p></div>\n          <div><h2>Views</h2><p>${views}</p></div>\n          <div><h2>Comments</h2><p>${comments}</p></div>\n          <div><h2>Downloads</h2><p>${downloads}</p></div>\n        </div>\n      </a>\n      </li>\n    `;\n  });\n\n  galleryEl.innerHTML += gallery.join('');\n  lightbox.refresh();\n}\n\nexport function clearGallery() {\n  galleryEl.innerHTML = '';\n}\n\nexport function showLoader() {\n  loaderTextEl.innerHTML = 'Loading images, please wait...';\n  loaderEl.classList.add('loader');\n}\n\nexport function hideLoader() {\n  loaderTextEl.innerHTML = null;\n  loaderEl.classList.remove('loader');\n}\n\nexport function showLoadMoreButton() {\n  loadMoreBtn.style.display = 'block';\n}\n\nexport function hideLoadMoreButton() {\n  loadMoreBtn.style.display = 'none';\n}\n","import { getImagesByQuery } from './js/pixabay-api.js';\nimport {\n  createGallery,\n  showLoader,\n  hideLoader,\n  clearGallery,\n  showLoadMoreButton,\n  hideLoadMoreButton\n} from './js/render-functions.js';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nhideLoadMoreButton();\nhideLoader();\nlet form = document.querySelector('form');\nlet options = {\n  theme: 'dark',\n  position: 'topRight',\n  maxWidth: 432,\n  backgroundColor: '#EF4040',\n  icon: 'fa-solid fa-triangle-exclamation'\n};\nlet query = '';\nlet page = 1;\n\nform.addEventListener('submit', event => {\n  event.preventDefault();\n  clearGallery();\n  let inputEl = form.querySelector('input');\n  query = inputEl.value.trim();\n  options.message = 'Enter search param';\n  if (!query) {\n    iziToast.show(options);\n    return;\n  }\n  inputEl.value = '';\n\n  getImagesByQuery(query, 1)\n    .then(data => {\n      var images = data.hits;\n      showLoader();\n      createGallery(images);\n      if (images.length > 0) {\n        showLoadMoreButton();\n      } else {\n        hideLoadMoreButton();\n      }\n      hideLoader();\n    })\n    .catch(error => {\n      options.message = error;\n      iziToast.show(options);\n    });\n});\n\nlet loadMoreBtn = document.querySelector('#load-more-btn');\nloadMoreBtn.addEventListener('click', async () => {\n  page++;\n  showLoader();\n  hideLoadMoreButton();\n  try {\n    getImagesByQuery(query, page).then(data => {\n      var images = data.hits;\n      if (images.length === 0) {\n        iziToast.show({ message: 'No image available.' });\n        return;\n      }\n      createGallery(images);\n      let card = document.querySelector('.gallery-item');\n      if (card) {\n        window.scrollBy({\n          top: window.innerHeight + card.getBoundingClientRect().height * 2,\n          behavior: 'smooth'\n        });\n      }\n      if (page * 15 >= data.totalHits) {\n        hideLoadMoreButton();\n        iziToast.show({\n          message: `We're sorry, but you've reached the end of search results.`\n        });\n      } else {\n        showLoadMoreButton();\n      }\n    });\n  } catch (error) {\n    let options = {\n      theme: 'dark',\n      position: 'topRight',\n      maxWidth: 432,\n      backgroundColor: '#EF4040',\n      icon: 'fa-solid fa-triangle-exclamation',\n      message: error\n    };\n    iziToast.show(options);\n  } finally {\n    hideLoader();\n    showLoadMoreButton();\n  }\n});\n"],"names":["API_KEY","BASE_URL","getImagesByQuery","query","page","axios","response","error","options","iziToast","galleryEl","loadMoreBtn","loaderEl","loaderTextEl","lightbox","SimpleLightbox","createGallery","images","gallery","props","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","form","event","inputEl","data","card"],"mappings":"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"}